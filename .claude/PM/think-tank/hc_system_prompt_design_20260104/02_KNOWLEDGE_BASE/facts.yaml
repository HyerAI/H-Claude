# Merged Facts - HC System Prompt Design
# 3 scouts, 106 total facts, condensed to critical findings

merged_date: '2026-01-04'
scout_count: 3
total_raw_facts: 106

critical_findings:

  # === ROLE DEFINITION (Problem Area) ===
  role_ambiguity:
    - finding: 'Project CLAUDE.md defines HC as "Product Owner" - guide through SSoT → Roadmap → Phases → Execution'
      source: 'CLAUDE.md:5-7'
    - finding: 'Global CLAUDE.md defines role as "Holistic System Architect & Technical Orchestrator"'
      source: '~/.claude/CLAUDE.md:1'
    - finding: 'These roles have different implications: PO routes work, Architect executes work'
      implication: 'Role conflict may cause HC to oscillate between routing and executing'

  # === COMMAND INFRASTRUCTURE (What Exists) ===
  command_structure:
    - finding: '4 commands: /think-tank (planning), /hc-execute (execution), /hc-glass (code audit), /red-team (doc audit)'
    - finding: 'Command flow: NORTHSTAR → /think-tank --roadmap → ROADMAP.yaml → /think-tank --phase=X → execution-plan.yaml → /hc-execute'
    - finding: 'All commands spawn background Opus orchestrators (except think-tank which is blocking by design)'
    - gap: 'No routing decision tree - when to use which command vs inline execution'

  # === SESSION PROTOCOL (What Exists) ===
  session_start:
    - finding: '5 mandatory steps: 1) Cleanup orphans, 2) Read state, 3) Spawn triage, 4) Greet user, 5) Retrieve triage'
    - finding: 'Triage generates SESSION BRIEF with roadmap status, drift alerts, recommended action'
    - gap: 'No validation that SSoT/NORTHSTAR/ROADMAP exist before proceeding'

  # === STATE MANAGEMENT (What Exists) ===
  state_files:
    - finding: 'context.yaml - session state (focus, recent_actions, blockers, backlog)'
    - finding: 'ROADMAP.yaml - project phases, dependencies, plan_paths'
    - finding: 'STATE.yaml - per think-tank session tracking'
    - finding: 'execution-plan.yaml - task status tracking'
    - finding: 'BACKLOG.yaml - prioritized deferred work'
    - gap: 'No failure tracking or incident log at HC level'
    - gap: 'No preference tracking'

  # === GIT INTEGRATION (What Exists) ===
  git_agent:
    - finding: 'git-engineer handles commits with Conventional Commit format'
    - finding: 'ALWAYS includes context.yaml for crash-proof state'
    - gap: 'Not running continuously - spawned on-demand by HC'

  # === DESIGN VS REALITY (Problems Found) ===
  enforcement_gaps:
    - finding: 'ADR-004: No SWEEP_REPORT.md in any session despite being mandatory'
    - finding: 'ADR-004: No PHASE_X folders, WORKER_OUTPUTS in sessions - artifact trail broken'
    - finding: '03_SESSIONS folders consistently empty despite ADR-003 making transcript capture mandatory'
    - finding: '100% success paradox: 36 tasks, 0 failures across 3 sessions suggests bypassing QA'
    - implication: 'HC executes inline without using commands, creating no artifacts'

  # === BEHAVIORAL RULES (What Exists) ===
  current_rules:
    - finding: 'No assumptions - ask if unclear'
    - finding: 'Fix issues directly - no workarounds'
    - finding: 'No unrequested work'
    - finding: 'Decision Brief format for surfacing decisions'
    - gap: 'No explicit rule about command routing vs inline execution'
    - gap: 'No definition of "significant work" threshold'

gaps_summary:
  - 'No routing discipline: when to use commands vs inline'
  - 'No SSoT/NORTHSTAR/ROADMAP validation at session start'
  - 'No HC-LOG for failures and preferences'
  - 'No enforcement of artifact creation'
  - 'Role ambiguity: Product Owner vs System Architect'
  - 'git-agent not running continuously'
